<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Employee Portal | Admin</title>
  <link rel="stylesheet" href="./assets/app.css"/>
</head>

<body class="app-bg">

<header class="topbar">
  <div class="brand-mini">
    <div class="brand-dot"></div>
    <div>
      <div class="brand-title">Employee Portal</div>
      <div class="brand-sub">Admin Panel</div>
    </div>
  </div>

  <div class="topbar-right">
    <div class="topbar-pill" id="adminBadge">Admin</div>
    <button class="btn sm ghost" id="btnLogout">Log out</button>
  </div>
</header>

<main class="content">

<!-- SEARCH -->
<section class="card">
  <h3 class="h3">Search Employee</h3>

  <input id="searchEmail" class="inp" placeholder="employee@email.com">
  <button class="btn primary" id="btnSearch">Load Employee</button>
  <div class="small muted" id="searchMsg"></div>
</section>

<!-- APPOINTMENT -->
<section class="card">
  <h3 class="h3">Appointment</h3>

  <input id="aDate" class="inp" type="date">
  <input id="aTime" class="inp" type="time">
  <input id="aAddr" class="inp" placeholder="Address">
  <input id="aNotes" class="inp" placeholder="Notes">

  <button class="btn primary" id="btnSaveAppointment">Save Appointment</button>
  <div class="small muted" id="apptMsg"></div>
</section>

<!-- NOTIFICATIONS -->
<section class="card">
  <h3 class="h3">Notifications</h3>

  <input id="nTitle" class="inp" placeholder="Title">
  <input id="nBody" class="inp" placeholder="Message">

  <select id="nRoute" class="inp">
    <option value="progress">Progress</option>
    <option value="i9">I-9</option>
    <option value="shift">Shift</option>
    <option value="firstday">First Day</option>
  </select>

  <button class="btn primary" id="btnAddNotif">Add Notification</button>

  <div id="notifList"></div>
</section>

<!-- TEAM -->
<section class="card">
  <h3 class="h3">Team</h3>

  <input id="tName" class="inp" placeholder="Name">
  <input id="tRole" class="inp" placeholder="Role">
  <input id="tEmail" class="inp" placeholder="Email">
  <input id="tPhone" class="inp" placeholder="Phone">

  <button class="btn primary" id="btnAddTeam">Add Team Member</button>

  <div id="teamList"></div>
</section>

<!-- ALLOWED IDS -->
<section class="card">
  <h3 class="h3">Allowed Employee IDs</h3>

  <input id="newEmpId" class="inp" placeholder="SP023">
  <input id="newEmpName" class="inp" placeholder="Name (optional)">

  <button class="btn primary" id="btnAddAllowed">Add ID</button>

  <div id="allowedList"></div>
</section>

</main>

<script type="module">
  import { uiSetText } from "./assets/ui.js";
  import { onAuth, signOutNow } from "./assets/auth.js";
  import { initAdminApp } from "./assets/admin.js";

  document.getElementById("btnLogout").addEventListener("click", async () => {
    await signOutNow();
    window.location.href = "./index.html";
  });

  onAuth(async (user) => {
    uiSetText(document.getElementById("adminBadge"), user?.email || "Admin");
    await initAdminApp(user);
  });
</script>

</body>
</html>
