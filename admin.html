<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SunPower Admin Portal</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            background: #f4f6fb; 
            min-height: 100vh;
        }
        
        /* Header */
        .header { 
            background: linear-gradient(135deg, #0b1220, #1e3a5f); 
            color: white; 
            padding: 20px; 
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .header-content { max-width: 1400px; margin: 0 auto; }
        .header-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .logo { display: flex; align-items: center; gap: 12px; font-size: 24px; font-weight: 800; }
        .logo-dot { width: 12px; height: 12px; background: #22c55e; border-radius: 50%; }
        .logout-btn { 
            background: rgba(255,255,255,0.1); 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            border-radius: 8px; 
            cursor: pointer;
            font-weight: 600;
        }
        
        /* Employee Selector */
        .employee-selector { 
            background: rgba(255,255,255,0.1); 
            padding: 16px; 
            border-radius: 12px;
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
        }
        .selector-label { font-weight: 700; font-size: 14px; }
        .selector-input { 
            flex: 1;
            min-width: 200px;
            padding: 12px 16px; 
            border: 2px solid rgba(255,255,255,0.2); 
            border-radius: 8px; 
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 16px;
            font-weight: 700;
        }
        .selector-input::placeholder { color: rgba(255,255,255,0.5); }
        .selector-btn { 
            padding: 12px 24px; 
            background: #2563eb; 
            color: white; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer;
            font-weight: 700;
        }
        .current-emp { 
            background: #22c55e; 
            padding: 8px 16px; 
            border-radius: 20px; 
            font-size: 14px;
            font-weight: 700;
            display: none;
        }
        .current-emp.active { display: block; }
        
        /* Main Layout */
        .container { max-width: 1400px; margin: 0 auto; padding: 24px; }
        
        /* Tabs */
        .tabs { 
            display: flex; 
            gap: 8px; 
            margin-bottom: 24px;
            flex-wrap: wrap;
            background: white;
            padding: 8px;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .tab { 
            padding: 12px 20px; 
            border-radius: 8px; 
            cursor: pointer; 
            font-weight: 600;
            font-size: 14px;
            border: none;
            background: transparent;
            color: #6b7280;
        }
        .tab:hover { background: #f3f4f6; }
        .tab.active { background: #2563eb; color: white; }
        
        /* Content Sections */
        .content-section { display: none; }
        .content-section.active { display: block; }
        
        /* Cards */
        .card { 
            background: white; 
            border-radius: 16px; 
            padding: 24px; 
            margin-bottom: 24px;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
        }
        .card-title { 
            font-size: 18px; 
            font-weight: 700; 
            margin-bottom: 20px; 
            color: #0b1220;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* Forms */
        .form-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
            gap: 16px; 
        }
        .form-group { display: flex; flex-direction: column; gap: 6px; }
        .form-label { 
            font-size: 12px; 
            font-weight: 700; 
            text-transform: uppercase; 
            color: #6b7280; 
            letter-spacing: 0.5px;
        }
        .form-input, .form-select, .form-textarea { 
            padding: 12px 16px; 
            border: 2px solid #e5e7eb; 
            border-radius: 10px; 
            font-size: 14px;
            transition: all 0.2s;
        }
        .form-input:focus, .form-select:focus, .form-textarea:focus { 
            outline: none; 
            border-color: #2563eb; 
        }
        .form-textarea { resize: vertical; min-height: 100px; }
        
        /* Buttons */
        .btn { 
            padding: 12px 24px; 
            border-radius: 10px; 
            font-weight: 700; 
            cursor: pointer; 
            border: none;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .btn-primary { background: #2563eb; color: white; }
        .btn-primary:hover { background: #1d4ed8; }
        .btn-success { background: #22c55e; color: white; }
        .btn-success:hover { background: #16a34a; }
        .btn-danger { background: #ef4444; color: white; }
        .btn-danger:hover { background: #dc2626; }
        .btn-secondary { background: #f3f4f6; color: #374151; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        
        /* Employee List */
        .employee-list { display: flex; flex-direction: column; gap: 12px; }
        .employee-item { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 16px; 
            background: #f9fafb; 
            border-radius: 12px;
            border: 1px solid #e5e7eb;
        }
        .employee-info { display: flex; flex-direction: column; gap: 4px; }
        .employee-id { font-weight: 700; color: #2563eb; font-size: 16px; }
        .employee-name { color: #6b7280; font-size: 14px; }
        .status-badge { 
            padding: 6px 12px; 
            border-radius: 20px; 
            font-size: 12px; 
            font-weight: 700;
        }
        .status-active { background: #dcfce7; color: #166534; }
        .status-inactive { background: #fee2e2; color: #991b1b; }
        
        /* Chat */
        .chat-container { 
            border: 2px solid #e5e7eb; 
            border-radius: 12px; 
            height: 500px;
            display: flex;
            flex-direction: column;
        }
        .chat-header { 
            padding: 16px; 
            background: #f9fafb; 
            border-bottom: 1px solid #e5e7eb;
            font-weight: 700;
        }
        .chat-messages { 
            flex: 1; 
            overflow-y: auto; 
            padding: 16px; 
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .chat-input-area { 
            display: flex; 
            gap: 12px; 
            padding: 16px; 
            background: #f9fafb;
            border-top: 1px solid #e5e7eb;
        }
        .chat-input { 
            flex: 1; 
            padding: 12px 16px; 
            border: 2px solid #e5e7eb; 
            border-radius: 10px;
        }
        
        .message { 
            max-width: 80%; 
            padding: 12px 16px; 
            border-radius: 12px;
            font-size: 14px;
        }
        .message.admin { 
            background: #2563eb; 
            color: white; 
            align-self: flex-end;
        }
        .message.employee { 
            background: #f3f4f6; 
            color: #0b1220; 
            align-self: flex-start;
        }
        
        /* Shift Approval */
        .shift-info { 
            background: #eff6ff; 
            padding: 16px; 
            border-radius: 12px; 
            margin-bottom: 16px;
        }
        .shift-row { 
            display: flex; 
            justify-content: space-between; 
            padding: 8px 0;
            border-bottom: 1px solid #dbeafe;
        }
        .shift-row:last-child { border-bottom: none; }
        
        /* Toast */
        .toast-container { 
            position: fixed; 
            bottom: 24px; 
            right: 24px; 
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .toast { 
            padding: 16px 24px; 
            border-radius: 10px; 
            color: white; 
            font-weight: 600;
            animation: slideIn 0.3s ease;
            max-width: 400px;
        }
        @keyframes slideIn { 
            from { transform: translateX(100%); opacity: 0; } 
            to { transform: translateX(0); opacity: 1; } 
        }
        .toast.success { background: #22c55e; }
        .toast.error { background: #ef4444; }
        .toast.info { background: #3b82f6; }
        
        /* Alert */
        .alert { 
            padding: 16px; 
            border-radius: 8px; 
            margin-bottom: 16px;
        }
        .alert-warning { background: #fef3c7; color: #92400e; }
        .alert-success { background: #dcfce7; color: #166534; }
        
        /* Disabled overlay */
        .disabled-overlay {
            position: relative;
            opacity: 0.6;
            pointer-events: none;
        }
        .disabled-overlay::after {
            content: "Select an employee above";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #0b1220;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 700;
        }
        
        @media (max-width: 768px) {
            .form-grid { grid-template-columns: 1fr; }
            .tabs { overflow-x: auto; flex-wrap: nowrap; }
        }
    </style>
    <link rel="stylesheet" href="assets/app.css">
</head>
<body>
    <!-- Header with Employee Selector -->
    <header class="header">
        <div class="header-content">
            <div class="header-top">
                <div class="logo">
                    <div class="logo-dot"></div>
                    SunPower Admin Portal
                </div>
                <button class="logout-btn" id="btnLogout">Log Out</button>
            </div>
            
            <div class="employee-selector">
                <span class="selector-label">üéØ CURRENT EMPLOYEE:</span>
                <input 
                    type="text" 
                    class="selector-input" 
                    id="currentEmpId" 
                    placeholder="Enter ID (e.g., SP023)"
                    style="text-transform: uppercase;"
                >
                <button class="selector-btn" id="btnLoadEmp">Load Employee</button>
                <div class="current-emp" id="currentEmpBadge">None selected</div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" data-tab="profile">üë§ Profile</button>
            <button class="tab" data-tab="appointment">üìÖ Appointment</button>
            <button class="tab" data-tab="shift">üïê Shift Approval</button>
            <button class="tab" data-tab="notifications">üîî Notifications</button>
            <button class="tab" data-tab="chat">üí¨ Chat</button>
            <button class="tab" data-tab="manage">‚öôÔ∏è Manage IDs</button>
        </div>

        <!-- Profile Section -->
        <div id="tab-profile" class="content-section active">
            <div class="card">
                <div class="card-title">Personal Information</div>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">First Name</label>
                        <input type="text" class="form-input" id="profFirstName">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Last Name</label>
                        <input type="text" class="form-input" id="profLastName">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Date of Birth</label>
                        <input type="date" class="form-input" id="profDOB">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone</label>
                        <input type="tel" class="form-input" id="profPhone">
                    </div>
                    <div class="form-group" style="grid-column: span 2;">
                        <label class="form-label">Address</label>
                        <input type="text" class="form-input" id="profAddress">
                    </div>
                    <div class="form-group">
                        <label class="form-label">City</label>
                        <input type="text" class="form-input" id="profCity">
                    </div>
                    <div class="form-group">
                        <label class="form-label">State / ZIP</label>
                        <input type="text" class="form-input" id="profStateZip">
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">Emergency Contact</div>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Contact Name</label>
                        <input type="text" class="form-input" id="profEmergencyName">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Contact Phone</label>
                        <input type="tel" class="form-input" id="profEmergencyPhone">
                    </div>
                </div>
                <div style="margin-top: 20px;">
                    <button class="btn btn-primary" id="btnSaveProfile">üíæ Save Profile</button>
                </div>
            </div>
        </div>

        <!-- Appointment Section -->
        <div id="tab-appointment" class="content-section">
            <div class="card">
                <div class="card-title">First Day Appointment</div>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Start Date</label>
                        <input type="date" class="form-input" id="apptDate">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Check-in Time</label>
                        <input type="time" class="form-input" id="apptTime">
                    </div>
                    <div class="form-group" style="grid-column: span 2;">
                        <label class="form-label">Facility Address</label>
                        <input type="text" class="form-input" id="apptAddress" placeholder="1234 Industrial Blvd, Louisville, KY 40218">
                    </div>
                    <div class="form-group" style="grid-column: span 2;">
                        <label class="form-label">Instructions for Employee</label>
                        <textarea class="form-textarea" id="apptNotes" placeholder="Parking instructions, what to bring, dress code, etc."></textarea>
                    </div>
                </div>
                <div style="margin-top: 20px; display: flex; gap: 12px;">
                    <button class="btn btn-primary" id="btnSaveAppt">üíæ Save Appointment</button>
                    <button class="btn btn-secondary" id="btnClearAppt">Clear</button>
                </div>
                <div class="alert alert-success" id="apptSuccess" style="display: none; margin-top: 16px;">
                    ‚úÖ Appointment saved! Employee will see this in their portal.
                </div>
            </div>
        </div>

        <!-- Shift Approval Section -->
        <div id="tab-shift" class="content-section">
            <div class="card">
                <div class="card-title">Shift Selection Approval</div>
                <div id="shiftPending" style="display: none;">
                    <div class="shift-info">
                        <div class="shift-row">
                            <span>Position:</span>
                            <strong id="shiftPosition">-</strong>
                        </div>
                        <div class="shift-row">
                            <span>Shift:</span>
                            <strong id="shiftTime">-</strong>
                        </div>
                        <div class="shift-row">
                            <span>Selected on:</span>
                            <strong id="shiftDate">-</strong>
                        </div>
                    </div>
                    <div style="display: flex; gap: 12px;">
                        <button class="btn btn-success" id="btnApproveShift">‚úÖ Approve Shift</button>
                        <button class="btn btn-danger" id="btnRejectShift">‚ùå Request Change</button>
                    </div>
                </div>
                <div id="shiftApproved" style="display: none;" class="alert alert-success">
                    ‚úÖ Shift already approved for this employee.
                </div>
                <div id="shiftNone" class="alert alert-warning">
                    ‚ö†Ô∏è Employee hasn't selected a shift yet.
                </div>
            </div>
        </div>

        <!-- Notifications Section -->
        <div id="tab-notifications" class="content-section">
            <div class="card">
                <div class="card-title">Send Notification to This Employee</div>
                <div class="form-grid">
                    <div class="form-group" style="grid-column: span 2;">
                        <label class="form-label">Title</label>
                        <input type="text" class="form-input" id="notifTitle" placeholder="Important Update">
                    </div>
                    <div class="form-group" style="grid-column: span 2;">
                        <label class="form-label">Message</label>
                        <textarea class="form-textarea" id="notifBody" rows="4" placeholder="Enter your message..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Type</label>
                        <select class="form-select" id="notifType">
                            <option value="info">‚ÑπÔ∏è Info</option>
                            <option value="success">‚úÖ Success</option>
                            <option value="warning">‚ö†Ô∏è Warning</option>
                            <option value="urgent">üö® Urgent</option>
                        </select>
                    </div>
                </div>
                <div style="margin-top: 20px;">
                    <button class="btn btn-primary" id="btnSendNotif">üì® Send Notification</button>
                </div>
            </div>
        </div>

        <!-- Chat Section -->
        <div id="tab-chat" class="content-section">
            <div class="card">
                <div class="card-title">Live Chat</div>
                <div class="chat-container">
                    <div class="chat-header" id="chatHeader">
                        Select an employee to start chatting
                    </div>
                    <div class="chat-messages" id="chatMessages">
                        <div style="text-align: center; color: #9ca3af; padding: 40px;">
                            üí¨ Load an employee to view conversation
                        </div>
                    </div>
                    <div class="chat-input-area">
                        <input type="text" class="chat-input" id="chatInput" placeholder="Type message..." disabled>
                        <button class="btn btn-primary" id="btnSendChat" disabled>Send</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Manage IDs Section -->
        <div id="tab-manage" class="content-section">
            <div class="card">
                <div class="card-title">Add New Employee ID</div>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Employee ID (SP###)</label>
                        <input type="text" class="form-input" id="newEmpId" placeholder="SP001" style="text-transform: uppercase;">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Full Name</label>
                        <input type="text" class="form-input" id="newEmpName" placeholder="John Smith">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email (optional)</label>
                        <input type="email" class="form-input" id="newEmpEmail" placeholder="john@email.com">
                    </div>
                    <div class="form-group" style="display: flex; align-items: flex-end;">
                      <button id="btnAddEmp" onclick="window.addNewEmployee()">Create Employee</button>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">All Registered Employees</div>
                <div id="allEmployeesList">
                    <div style="text-align: center; color: #6b7280; padding: 40px;">
                        Loading employees...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Script -->
    <script type="module">
        import { initAdminApp } from './assets/admin.js';
        
        // Global navigation helper
        window.switchTab = function(tabId) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            
            document.querySelector(`[data-tab="${tabId}"]`)?.classList.add('active');
            document.getElementById(`tab-${tabId}`)?.classList.add('active');
        };
        
        // Initialize
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initAdminApp);
        } else {
            initAdminApp();
        }
    </script>
</body>
</html>

