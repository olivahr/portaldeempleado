<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SunPower Admin Portal</title>
    <link rel="stylesheet" href="assets/admin.css">
<style>
    /* Fix para que el admin no se rompa con admin.css */
    .form-input, .form-select, .form-textarea {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
    }
    
    .form-label {
        text-transform: none !important;
        font-size: 12px !important;
    }
    
    .form-grid {
        width: 100% !important;
    }
    
    .card {
        overflow: hidden !important;
    }
</style>
</head>
<body>
    <!-- Header with Employee Selector -->
    <header class="header">
        <div class="header-content">
            <div class="header-top">
                <div class="logo">
                    <div class="logo-dot"></div>
                    SunPower Admin Portal
                </div>
                <button class="logout-btn" id="btnLogout" onclick="window.location.href='./index.html'">Log Out</button>
            </div>
            
            <div class="employee-selector">
                <span class="selector-label">üéØ CURRENT EMPLOYEE:</span>
                <input 
                    type="text" 
                    class="selector-input" 
                    id="currentEmpId" 
                    placeholder="Enter ID (e.g., SP023)"
                    style="text-transform: uppercase;"
                >
                <button class="selector-btn" id="btnLoadEmp">Load Employee</button>
                <div class="current-emp" id="currentEmpBadge">None selected</div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" data-tab="profile">üë§ Profile</button>
            <button class="tab" data-tab="appointment">üìÖ Appointment</button>
            <button class="tab" data-tab="shift">üïê Shift Approval</button>
            <button class="tab" data-tab="notifications">üîî Notifications</button>
            <button class="tab" data-tab="manage">‚öôÔ∏è Manage IDs</button>
        </div>

        <!-- Profile Section -->
        <div id="tab-profile" class="content-section active">
            <div class="card">
                <div class="card-title">Personal Information</div>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">First Name</label>
                        <input type="text" class="form-input" id="profFirstName">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Last Name</label>
                        <input type="text" class="form-input" id="profLastName">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Date of Birth</label>
                        <input type="date" class="form-input" id="profDOB">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone</label>
                        <input type="tel" class="form-input" id="profPhone">
                    </div>
                    <div class="form-group" style="grid-column: span 2;">
                        <label class="form-label">Address</label>
                        <input type="text" class="form-input" id="profAddress">
                    </div>
                    <div class="form-group">
                        <label class="form-label">City</label>
                        <input type="text" class="form-input" id="profCity">
                    </div>
                    <div class="form-group">
                        <label class="form-label">State / ZIP</label>
                        <input type="text" class="form-input" id="profStateZip">
                    </div>
                </div>
                        </div>
            <div style="margin-top: 20px;">
                <button class="btn btn-primary" id="btnSaveProfile">üíæ Save Profile</button>
            </div>
        </div>
    </div>
</div>

        <!-- Appointment Section -->
        <div id="tab-appointment" class="content-section">
            <div class="card">
                <div class="card-title">First Day Appointment</div>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Start Date</label>
                        <input type="date" class="form-input" id="apptDate">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Check-in Time</label>
                        <input type="time" class="form-input" id="apptTime">
                    </div>
                    <div class="form-group" style="grid-column: span 2;">
                        <label class="form-label">Facility Address</label>
                        <input type="text" class="form-input" id="apptAddress" placeholder="1234 Industrial Blvd, Louisville, KY 40218">
                    </div>
                    <div class="form-group" style="grid-column: span 2;">
                        <label class="form-label">Instructions for Employee</label>
                        <textarea class="form-textarea" id="apptNotes" placeholder="Parking instructions, what to bring, dress code, etc."></textarea>
                    </div>
                </div>
                <div style="margin-top: 20px; display: flex; gap: 12px;">
                    <button class="btn btn-primary" id="btnSaveAppt">üíæ Save Appointment</button>
                    <button class="btn btn-secondary" id="btnClearAppt">Clear</button>
                </div>
                <div class="alert alert-success" id="apptSuccess" style="display: none; margin-top: 16px;">
                    ‚úÖ Appointment saved! Employee will see this in their portal.
                </div>
            </div>
        </div>

        <!-- Shift Approval Section -->
        <div id="tab-shift" class="content-section">
            <div class="card">
                <div class="card-title">Shift Selection Approval</div>
                <div id="shiftPending" style="display: none;">
                    <div class="shift-info">
                        <div class="shift-row">
                            <span>Position:</span>
                            <strong id="shiftPosition">-</strong>
                        </div>
                        <div class="shift-row">
                            <span>Shift:</span>
                            <strong id="shiftTime">-</strong>
                        </div>
                        <div class="shift-row">
                            <span>Selected on:</span>
                            <strong id="shiftDate">-</strong>
                        </div>
                    </div>
                    <div style="display: flex; gap: 12px;">
                        <button class="btn btn-success" id="btnApproveShift">‚úÖ Approve Shift</button>
                        <button class="btn btn-danger" id="btnRejectShift">‚ùå Request Change</button>
                    </div>
                </div>
                <div id="shiftApproved" style="display: none;" class="alert alert-success">
                    ‚úÖ Shift already approved for this employee.
                </div>
                <div id="shiftNone" class="alert alert-warning">
                    ‚ö†Ô∏è Employee hasn't selected a shift yet.
                </div>
            </div>
        </div>

        <!-- Notifications Section -->
        <div id="tab-notifications" class="content-section">
            <div class="card">
                <div class="card-title">Send Notification to This Employee</div>
                <div class="form-grid">
                    <div class="form-group" style="grid-column: span 2;">
                        <label class="form-label">Title</label>
                        <input type="text" class="form-input" id="notifTitle" placeholder="Important Update">
                    </div>
                    <div class="form-group" style="grid-column: span 2;">
                        <label class="form-label">Message</label>
                        <textarea class="form-textarea" id="notifBody" rows="4" placeholder="Enter your message..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Type</label>
                        <select class="form-select" id="notifType">
                            <option value="info">‚ÑπÔ∏è Info</option>
                            <option value="success">‚úÖ Success</option>
                            <option value="warning">‚ö†Ô∏è Warning</option>
                            <option value="urgent">üö® Urgent</option>
                        </select>
                    </div>
                </div>
                <div style="margin-top: 20px;">
                    <button class="btn btn-primary" id="btnSendNotif">üì® Send Notification</button>
                </div>
            </div>
        </div>

        <!-- Manage IDs Section -->
        <div id="tab-manage" class="content-section">
            <div class="card">
                <div class="card-title">Add New Employee ID</div>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Employee ID (SP###)</label>
                        <input type="text" class="form-input" id="newEmpId" placeholder="SP001" style="text-transform: uppercase;">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Full Name</label>
                        <input type="text" class="form-input" id="newEmpName" placeholder="John Smith">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email (optional)</label>
                        <input type="email" class="form-input" id="newEmpEmail" placeholder="john@email.com">
                    </div>
                    <div class="form-group" style="display: flex; align-items: flex-end;">
                      <button class="btn btn-primary" id="btnAddEmp" onclick="window.addNewEmployee()">Create Employee</button>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">All Registered Employees</div>
                <div id="allEmployeesList">
                    <div style="text-align: center; color: #6b7280; padding: 40px;">
                        Loading employees...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Script -->
    <script type="module">
        import { initAdminApp } from './assets/admin.js';
        
        // Global navigation helper
        window.switchTab = function(tabId) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            
            document.querySelector(`[data-tab="${tabId}"]`)?.classList.add('active');
            document.getElementById(`tab-${tabId}`)?.classList.add('active');
        };
        
        // Initialize
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initAdminApp);
        } else {
            initAdminApp();
        }
    </script>
</body>
</html>
