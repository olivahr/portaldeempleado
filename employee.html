<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Employee Portal</title>
  <link rel="stylesheet" href="./assets/app.css"/>
</head>

<body class="portal">

<header class="topbar">
  <div class="topbar-left">

    <!-- Hamburger -->
    <button class="menu-btn" id="btnMenu" type="button" aria-label="Open menu">
      <div class="menu-ico" aria-hidden="true">
        <span></span><span></span><span></span>
      </div>
    </button>

    <div class="brand-mini">
      <div class="brand-dot"></div>
      <div class="brand-title">Employee Portal</div>
    </div>

    <!-- Employee ID badge -->
    <div class="topbar-pill" id="userBadge">Loading…</div>

  </div>

  <div class="topbar-right">
    <!-- Admin hidden by default; employee.js shows it if admin -->
    <button class="btn sm ghost" id="btnAdminGo" type="button" style="display:none;">Admin</button>
    <button class="btn sm ghost" id="btnLogout" type="button">Log out</button>
  </div>
</header>

<!-- Drawer overlay -->
<div id="drawerOverlay" class="drawer-overlay"></div>

<div class="shell">

  <!-- SIDEBAR -->
  <aside class="sidebar" id="sidebar">
    <nav class="nav" id="nav">

      <!-- ONBOARDING -->
      <a class="nav-item" href="#progress" data-route="progress">Progress</a>
      <a class="nav-item" href="#shift" data-route="shift">Shift Selection</a>
      <a class="nav-item" href="#footwear" data-route="footwear">Safety Footwear</a>
      <a class="nav-item" href="#i9" data-route="i9">I-9</a>
      <a class="nav-item" href="#documents" data-route="documents">Documents</a>
      <a class="nav-item" href="#firstday" data-route="firstday">First Day</a>

      <!-- WORK MODULES -->
      <a class="nav-item" href="#schedule" data-route="schedule">Schedule</a>
      <a class="nav-item" href="#hours" data-route="hours">My Hours</a>
      <a class="nav-item" href="#payroll" data-route="payroll">Payroll</a>
      <a class="nav-item" href="#timeoff" data-route="timeoff">Time Off</a>
      <a class="nav-item" href="#deposit" data-route="deposit">Direct Deposit</a>

      <!-- GENERAL -->
      <a class="nav-item" href="#notifications" data-route="notifications">Notifications</a>
      <a class="nav-item" href="#help" data-route="help">Help</a>

    </nav>

    <div class="sidebar-foot">
      <div class="small muted">Status</div>
      <div class="status-chip" id="statusShift">offline</div>
    </div>
  </aside>

  <!-- MAIN CONTENT -->
  <main class="content">

    <section class="page-head">
      <h1 id="pageTitle">Progress</h1>
      <div class="subhead" id="pageSub">
        Track your progress and complete pending steps.
      </div>
    </section>

    <section id="stagebar"></section>
    <section id="pageBody"></section>

    <footer class="footer">
      <span class="muted">Employee Portal</span>
      •
      <span class="muted" id="build">Firebase Connected</span>
    </footer>

  </main>

</div>

<script type="module">
  import { uiActiveNav } from "./assets/ui.js";
  import { signOutNow } from "./assets/auth.js";
  import { initEmployeeApp } from "./assets/employee.js";

  // Logout
  document.getElementById("btnLogout").onclick = async () => {
    await signOutNow();
    window.location.href = "./index.html";
  };

  // Admin (employee.js will show/hide this button; but keep handler)
  document.getElementById("btnAdminGo").onclick = () => {
    window.location.href = "./admin.html";
  };

  // Init app
  await initEmployeeApp();

  // Active nav highlight
  uiActiveNav();
  window.addEventListener("hashchange", uiActiveNav);
</script>

</body>
</html>
